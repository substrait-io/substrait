%YAML 1.2
---
urn: extension:io.substrait:functions_aggregate_generic
aggregate_functions:
  - name: "count"
    description: Count a set of values
    impls:
      - args:
          - name: x
            value: any
        options:
          overflow:
            values: [SILENT, SATURATE, ERROR]
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i64
        return: i64
  - name: "count"
    description: "Count a set of records (not field referenced)"
    impls:
      - options:
          overflow:
            values: [SILENT, SATURATE, ERROR]
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: i64
        return: i64
  - name: "any_value"
    description: >
      Selects an arbitrary value from a group of values.

      If the input is empty, the function returns null.
    impls:
      - args:
          - name: x
            value: any1
        options:
          ignore_nulls:
            values: [ "TRUE", "FALSE" ]
        nullability: DECLARED_OUTPUT
        decomposable: MANY
        intermediate: any1?
        return: any1?
  - name: grouping
    description: >
      Indicates whether the column(s) in a GROUP BY list are aggregated or
      not. This function can be used to distinguish between a NULL value in
      the raw data vs the total across all values that are returned by ROLLUP,
      CUBE or GROUPING SETS for a specific column.
      
      Returns an integer value which is unique for each combination of
      grouping values. The return value can be interpreted as a bit vector
      where bits in the binary representation of the integer correspond to each
      grouping value.
      
      For a single grouping value, the result is 1 if the data is aggregated
      across the specified column or 0 for not aggregated in the result set.
    impls:
      - args:
          - value: any?
        ordered: true
        variadic:
          min: 1
        nullability: DECLARED_OUTPUT
        return: i64
